<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Code Ninjas ‚Äì Review Builder</title>

  <style>
    :root{
      --bg1:#0ea5e9;
      --bg2:#2563eb;
      --card:#ffffff;
      --ink:#0f172a;
      --muted:#64748b;
      --brand:#2563eb;
      --brand-soft:#dbeafe;
      --border:#e5e7eb;
      --radius:18px;
      --shadow:0 14px 40px rgba(15,23,42,.18),0 3px 10px rgba(15,23,42,.10);
      --ok:#22c55e;
      --error:#ef4444;
    }

    *{box-sizing:border-box;margin:0;padding:0}

    html,body{
      min-height:100vh;
      font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif;
      color:var(--ink);
      background:linear-gradient(180deg,var(--bg1),var(--bg2));
      background-attachment:fixed;
    }

    body{
      display:flex;
      justify-content:center;
      align-items:center;
      padding:20px;
    }

    .wrap{
      width:100%;
      max-width:880px;
      display:flex;
      flex-direction:column;
      gap:10px;
    }

    header{
      text-align:center;
      color:#e5edff;
    }
    header .brand{
      display:flex;
      align-items:center;
      justify-content:center;
      gap:8px;
    }
    header img.logo{
      height:40px;
      width:auto;
      filter:drop-shadow(0 1px 2px rgba(15,23,42,.35));
    }
    header h1{
      margin:10px 0 4px;
      font-size:clamp(22px,4vw,32px);
      font-weight:800;
    }
    header p{
      margin:0;
      font-size:14px;
      color:#bfdbfe;
    }

    .card{
      background:var(--card);
      border-radius:var(--radius);
      padding:20px 18px 16px;
      border:1px solid var(--border);
      box-shadow:var(--shadow);
      backdrop-filter:saturate(1.2) blur(4px);
    }

    .topbar{
      display:flex;
      align-items:center;
      gap:10px;
      margin-bottom:14px;
    }
    .progress{
      flex:1;
      height:10px;
      background:#eef2ff;
      border-radius:999px;
      overflow:hidden;
    }
    .bar{
      height:100%;
      width:0;
      background:linear-gradient(90deg,var(--brand),#22d3ee);
      transition:width .25s ease;
    }
    .count{
      min-width:110px;
      text-align:right;
      font-weight:800;
      font-size:13px;
      color:#334155;
    }

    .step{
      display:none;
      animation:fade .22s ease;
    }
    .step.active{
      display:block;
    }

    @keyframes fade{
      from{opacity:0;transform:translateY(4px);}
      to{opacity:1;transform:none;}
    }

    .step-header{
      display:flex;
      align-items:flex-start;
      gap:10px;
      margin-bottom:10px;
    }
    .step-number{
      width:26px;
      height:26px;
      border-radius:999px;
      background:var(--brand-soft);
      color:var(--brand);
      display:flex;
      align-items:center;
      justify-content:center;
      font-weight:800;
      font-size:13px;
      flex-shrink:0;
    }
    .step-header h2{
      margin:0;
      font-size:18px;
      font-weight:800;
      color:#0f172a;
    }
    .step-description{
      margin:2px 0 0;
      font-size:13px;
      color:var(--muted);
    }

    .question-container{
      margin:6px 0 4px;
    }

    select,
    textarea,
    input[type="text"]{
      width:100%;
      padding:11px 12px;
      border-radius:12px;
      border:1px solid var(--border);
      font-size:14px;
      font-family:inherit;
      transition:all .18s ease;
      background:#f8fafc;
      color:var(--ink);
    }
    select:focus,
    textarea:focus,
    input[type="text"]:focus{
      outline:none;
      border-color:var(--brand);
      box-shadow:0 0 0 2px rgba(37,99,235,.14);
      background:#ffffff;
    }

    textarea{
      min-height:180px;
      resize:vertical;
      line-height:1.5;
    }

    .options-grid{
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
      gap:8px;
      margin-top:4px;
    }

    .option-card,
    .shoutout-option{
      display:block;
      border-radius:12px;
      padding:10px;
      border:1px solid var(--border);
      cursor:pointer;
      transition:all .18s ease;
      background:#ffffff;
    }

    .option-card:hover,
    .shoutout-option:hover{
      border-color:var(--brand);
      box-shadow:0 4px 14px rgba(15,23,42,.06);
      transform:translateY(-1px);
    }

    .option-card input,
    .shoutout-option input{
      display:none;
    }

    .option-card.selected,
    .shoutout-option.selected{
      border-color:var(--brand);
      background:var(--brand-soft);
    }

    .option-content{
      display:flex;
      align-items:flex-start;
      gap:8px;
      font-size:13px;
      color:#0f172a;
    }
    .option-icon{
      font-size:18px;
      line-height:1;
      margin-top:1px;
    }
    .option-text{
      font-weight:500;
    }

    .step-actions{
      display:flex;
      justify-content:space-between;
      gap:8px;
      margin-top:14px;
    }

    .btn{
      appearance:none;
      border-radius:12px;
      padding:11px 14px;
      border:1px solid var(--border);
      background:#f8fafc;
      font-size:13px;
      font-weight:700;
      cursor:pointer;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:4px;
      min-height:40px;
      white-space:nowrap;
      transition:all .18s ease;
    }
    .btn.primary{
      background:var(--brand);
      border-color:var(--brand);
      color:#ffffff;
      box-shadow:0 4px 14px rgba(37,99,235,.35);
    }
    .btn.ghost{
      background:#ffffff;
      color:#0f172a;
    }
    .btn:hover:not(:disabled){
      transform:translateY(-1px);
      box-shadow:0 6px 18px rgba(15,23,42,.14);
    }
    .btn.primary:hover:not(:disabled){
      background:#1d4ed8;
      border-color:#1d4ed8;
    }
    .btn:disabled{
      opacity:.5;
      cursor:not-allowed;
      box-shadow:none;
      transform:none;
    }

    .shoutout-section{
      margin-top:12px;
      padding:10px;
      border-radius:12px;
      background:#f8fafc;
      border:1px dashed var(--border);
      display:flex;
      flex-direction:column;
      gap:8px;
    }
    .shoutout-toggle{
      display:flex;
      align-items:center;
      gap:8px;
      cursor:pointer;
    }
    .shoutout-toggle input{
      accent-color:var(--brand);
      width:16px;
      height:16px;
    }
    .toggle-text{
      font-size:13px;
      font-weight:600;
      color:#0f172a;
    }

    .shoutout-details{
      display:none;
      margin-top:4px;
      padding:8px;
      background:#ffffff;
      border-radius:10px;
      border:1px solid var(--border);
    }
    .shoutout-options{
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(180px,1fr));
      gap:6px;
    }
    .shoutout-name{
      margin-top:6px;
      display:flex;
      flex-direction:column;
      gap:4px;
      font-size:12px;
      color:#475569;
    }
    .inline-note{
      font-size:11px;
      color:#6b7280;
      padding:6px 8px;
      border-radius:8px;
      background:#eff6ff;
    }

    .banner{
      display:none;
      margin-top:10px;
      padding:9px 10px;
      border-radius:10px;
      font-size:12px;
    }
    .banner.ok{
      background:rgba(22,163,74,.08);
      color:#15803d;
      border:1px solid rgba(22,163,74,.35);
    }
    .banner.error{
      background:rgba(239,68,68,.06);
      color:#b91c1c;
      border:1px solid rgba(239,68,68,.35);
    }

    .pill{
      display:inline-flex;
      align-items:center;
      padding:4px 9px;
      border-radius:999px;
      border:1px solid var(--border);
      font-size:10px;
      font-weight:600;
      color:#4b5563;
      background:#f9fafb;
      gap:4px;
    }
    .steps{
      margin-top:6px;
      padding-left:16px;
      font-size:11px;
      color:#6b7280;
    }
    .steps li{
      margin-bottom:4px;
    }

    @media (max-width:640px){
      body{
        padding:12px;
        align-items:flex-start;
      }
      .card{padding:14px;}
      .step-actions{
        flex-wrap:wrap;
      }
      .step-actions .btn.primary{
        flex:1 0 100%;
      }
    }
  </style>
</head>
<body>
  <script>
    // Favicon helper
    (function(){
      const link = document.createElement('link');
      link.rel = 'icon';
      link.type = 'image/x-icon';
      link.href = (window.location.origin || '') + '/favicon.ico';
      document.head.appendChild(link);
    })();
  </script>

  <div class="wrap">
    <header>
      <div class="brand">
        <img class="logo" src="https://www.codeninjas.com/hubfs/Group%201.svg" alt="Code Ninjas logo" onerror="this.style.display='none'">
      </div>
      <h1>Share Your Experience at Code Ninjas</h1>
      <p>Answer a few quick questions and we‚Äôll auto-build a polished 5‚òÖ-ready Google review for your center.</p>
    </header>

    <section class="card" id="wizard" aria-live="polite">
      <div class="topbar" aria-hidden="true">
        <div class="progress"><div class="bar" id="progressFill"></div></div>
        <div class="count" id="progressText">Step 1 of 8</div>
      </div>

      <!-- STEP 1: LOCATION -->
      <div class="step active" id="step1">
        <div class="step-header">
          <div class="step-number">1</div>
          <div>
            <h2>Where did you visit?</h2>
            <p class="step-description">Choose your Code Ninjas location to start your custom review.</p>
          </div>
        </div>
        <div class="question-container">
          <select id="location">
            <option value="">Choose a location.</option>
            <option value="Cooper City">Cooper City</option>
            <option value="Weston">Weston</option>
            <option value="Aventura">Aventura</option>
          </select>
        </div>
        <div class="step-actions">
          <span></span>
          <button class="btn primary" id="next1" disabled>Next ‚ñ∂</button>
        </div>
      </div>

      <!-- STEP 2: FACILITY -->
      <div class="step" id="step2">
        <div class="step-header">
          <div class="step-number">2</div>
          <div>
            <h2>How was the facility?</h2>
            <p class="step-description">Select at least one option.</p>
          </div>
        </div>
        <div class="question-container">
          <div class="options-grid">
            <label class="option-card">
              <input type="checkbox" value="clean" class="tag">
              <div class="option-content">
                <div class="option-icon">üßπ</div>
                <div class="option-text">Clean, bright, and well-maintained dojo</div>
              </div>
            </label>
            <label class="option-card">
              <input type="checkbox" value="organized" class="tag">
              <div class="option-content">
                <div class="option-icon">üìã</div>
                <div class="option-text">Organized layout that makes it easy to focus and learn</div>
              </div>
            </label>
            <label class="option-card">
              <input type="checkbox" value="safe" class="tag">
              <div class="option-content">
                <div class="option-icon">üõ°Ô∏è</div>
                <div class="option-text">Safe, secure check-in and attentive supervision</div>
              </div>
            </label>
            <label class="option-card">
              <input type="checkbox" value="fun-vibe" class="tag">
              <div class="option-content">
                <div class="option-icon">üéÆ</div>
                <div class="option-text">Fun, colorful, ninja-themed environment kids love</div>
              </div>
            </label>
            <label class="option-card">
              <input type="checkbox" value="tech" class="tag">
              <div class="option-content">
                <div class="option-icon">üíª</div>
                <div class="option-text">Modern gear and tech that match today‚Äôs young coders</div>
              </div>
            </label>
            <label class="option-card">
              <input type="checkbox" value="comfort" class="tag">
              <div class="option-content">
                <div class="option-icon">‚òï</div>
                <div class="option-text">Comfortable, welcoming space for families and Ninjas</div>
              </div>
            </label>
          </div>
        </div>
        <div class="step-actions">
          <button class="btn ghost" id="back2">‚óÄ Back</button>
          <button class="btn primary" id="next2" disabled>Next ‚ñ∂</button>
        </div>
      </div>

      <!-- STEP 3: STAFF & SENSEIS -->
      <div class="step" id="step3">
        <div class="step-header">
          <div class="step-number">3</div>
          <div>
            <h2>How were the staff & Senseis?</h2>
            <p class="step-description">Select at least one option.</p>
          </div>
        </div>
        <div class="question-container">
          <div class="options-grid">
            <label class="option-card">
              <input type="checkbox" value="friendly" class="tag">
              <div class="option-content">
                <div class="option-icon">üòä</div>
                <div class="option-text">Friendly, welcoming team that puts kids at ease</div>
              </div>
            </label>
            <label class="option-card">
              <input type="checkbox" value="knowledgeable" class="tag">
              <div class="option-content">
                <div class="option-icon">üß†</div>
                <div class="option-text">Knowledgeable, patient Senseis who explain concepts clearly</div>
              </div>
            </label>
            <label class="option-card">
              <input type="checkbox" value="engaging-staff" class="tag">
              <div class="option-content">
                <div class="option-icon">üéØ</div>
                <div class="option-text">Kept Ninjas engaged, excited, and challenged</div>
              </div>
            </label>
            <label class="option-card">
              <input type="checkbox" value="communication" class="tag">
              <div class="option-content">
                <div class="option-icon">üí¨</div>
                <div class="option-text">Clear, consistent communication with parents</div>
              </div>
            </label>
          </div>
        </div>
        <div class="step-actions">
          <button class="btn ghost" id="back3">‚óÄ Back</button>
          <button class="btn primary" id="next3" disabled>Next ‚ñ∂</button>
        </div>
      </div>

      <!-- STEP 4: INSTRUCTION & LEARNING -->
      <div class="step" id="step4">
        <div class="step-header">
          <div class="step-number">4</div>
          <div>
            <h2>How was the instruction & learning?</h2>
            <p class="step-description">Select at least one option.</p>
          </div>
        </div>
        <div class="question-container">
          <div class="options-grid">
            <label class="option-card">
              <input type="checkbox" value="engaging-lessons" class="tag">
              <div class="option-content">
                <div class="option-icon">üöÄ</div>
                <div class="option-text">Lessons are fun, hands-on, and engaging</div>
              </div>
            </label>
            <label class="option-card">
              <input type="checkbox" value="clear-structure" class="tag">
              <div class="option-content">
                <div class="option-icon">üìö</div>
                <div class="option-text">Clear belt system and curriculum that make progress visible</div>
              </div>
            </label>
            <label class="option-card">
              <input type="checkbox" value="real-progress" class="tag">
              <div class="option-content">
                <div class="option-icon">üìà</div>
                <div class="option-text">We‚Äôve seen real improvement in skills over time</div>
              </div>
            </label>
            <label class="option-card">
              <input type="checkbox" value="confidence" class="tag">
              <div class="option-content">
                <div class="option-icon">üí™</div>
                <div class="option-text">Builds problem-solving, persistence, and confidence</div>
              </div>
            </label>
          </div>
        </div>
        <div class="step-actions">
          <button class="btn ghost" id="back4">‚óÄ Back</button>
          <button class="btn primary" id="next4" disabled>Next ‚ñ∂</button>
        </div>
      </div>

      <!-- STEP 5: CHILD EXPERIENCE -->
      <div class="step" id="step5">
        <div class="step-header">
          <div class="step-number">5</div>
          <div>
            <h2>How does your child feel about Code Ninjas?</h2>
            <p class="step-description">Select at least one option.</p>
          </div>
        </div>
        <div class="question-container">
          <div class="options-grid">
            <label class="option-card">
              <input type="checkbox" value="looks-forward" class="tag">
              <div class="option-content">
                <div class="option-icon">‚≠ê</div>
                <div class="option-text">Looks forward to every session</div>
              </div>
            </label>
            <label class="option-card">
              <input type="checkbox" value="more-confident" class="tag">
              <div class="option-content">
                <div class="option-icon">üåü</div>
                <div class="option-text">More confident and independent with technology</div>
              </div>
            </label>
            <label class="option-card">
              <input type="checkbox" value="new-friends" class="tag">
              <div class="option-content">
                <div class="option-icon">ü§ù</div>
                <div class="option-text">Made new friends with similar interests</div>
              </div>
            </label>
            <label class="option-card">
              <input type="checkbox" value="creative-thinking" class="tag">
              <div class="option-content">
                <div class="option-icon">üí°</div>
                <div class="option-text">More creative, curious, and excited about STEM</div>
              </div>
            </label>
          </div>
        </div>
        <div class="step-actions">
          <button class="btn ghost" id="back5">‚óÄ Back</button>
          <button class="btn primary" id="next5" disabled>Next ‚ñ∂</button>
        </div>
      </div>

      <!-- STEP 6: PROGRAM TYPE -->
      <div class="step" id="step6">
        <div class="step-header">
          <div class="step-number">6</div>
          <div>
            <h2>Which program did your child attend?</h2>
            <p class="step-description">Choose the main experience you‚Äôre reviewing.</p>
          </div>
        </div>
        <div class="question-container">
          <div class="options-grid">
            <label class="option-card">
              <input type="radio" name="program" value="jr" class="tag">
              <div class="option-content">
                <div class="option-icon">üßí</div>
                <div class="option-text">JR (younger coders)</div>
              </div>
            </label>
            <label class="option-card">
              <input type="radio" name="program" value="create" class="tag">
              <div class="option-content">
                <div class="option-icon">üíª</div>
                <div class="option-text">CREATE (core coding program)</div>
              </div>
            </label>
            <label class="option-card">
              <input type="radio" name="program" value="robotics" class="tag">
              <div class="option-content">
                <div class="option-icon">ü§ñ</div>
                <div class="option-text">Robotics Academy</div>
              </div>
            </label>
            <label class="option-card">
              <input type="radio" name="program" value="ai" class="tag">
              <div class="option-content">
                <div class="option-icon">üß†</div>
                <div class="option-text">AI Academy / advanced tech</div>
              </div>
            </label>
            <label class="option-card">
              <input type="radio" name="program" value="clubs" class="tag">
              <div class="option-content">
                <div class="option-icon">üéÆ</div>
                <div class="option-text">Clubs (Minecraft, Roblox, YouTube, etc.)</div>
              </div>
            </label>
            <label class="option-card">
              <input type="radio" name="program" value="party" class="tag">
              <div class="option-content">
                <div class="option-icon">üéâ</div>
                <div class="option-text">Birthday party / event</div>
              </div>
            </label>
            <label class="option-card">
              <input type="radio" name="program" value="camp" class="tag">
              <div class="option-content">
                <div class="option-icon">‚òÄÔ∏è</div>
                <div class="option-text">Camp (summer / school break)</div>
              </div>
            </label>
          </div>
        </div>
        <div class="step-actions">
          <button class="btn ghost" id="back6">‚óÄ Back</button>
          <button class="btn primary" id="next6" disabled>Next ‚ñ∂</button>
        </div>
      </div>

      <!-- STEP 7: OPTIONAL SHOUTOUT -->
      <div class="step" id="step7">
        <div class="step-header">
          <div class="step-number">7</div>
          <div>
            <h2>Anyone you'd like to shout out?</h2>
            <p class="step-description">Optional, but we love celebrating awesome Senseis & staff.</p>
          </div>
        </div>
        <div class="shoutout-section">
          <label class="shoutout-toggle">
            <input type="checkbox" id="shoutoutCheck">
            <span class="toggle-text">Yes, I‚Äôd like to highlight someone specific or the whole team.</span>
          </label>
          <div class="shoutout-details" id="shoutoutDetails">
            <div class="shoutout-options">
              <label class="shoutout-option">
                <input type="radio" name="shoutoutType" value="sensei">
                <div class="option-content">
                  <div class="option-icon">üë®‚Äçüè´</div>
                  <div class="option-text">A Sensei / instructor</div>
                </div>
              </label>
              <label class="shoutout-option">
                <input type="radio" name="shoutoutType" value="director">
                <div class="option-content">
                  <div class="option-icon">üèØ</div>
                  <div class="option-text">Center Director / owner</div>
                </div>
              </label>
              <label class="shoutout-option">
                <input type="radio" name="shoutoutType" value="team">
                <div class="option-content">
                  <div class="option-icon">üôå</div>
                  <div class="option-text">The whole team</div>
                </div>
              </label>
            </div>
            <div class="shoutout-name" id="shoutoutNameSection" style="display:none;">
              <label for="shoutoutName">Name (if you remember it)</label>
              <input type="text" id="shoutoutName" placeholder="e.g. Sensei Alex">
              <div class="inline-note">We‚Äôll weave this naturally into your review.</div>
            </div>
          </div>
        </div>
        <div class="step-actions">
          <button class="btn ghost" id="back7">‚óÄ Back</button>
          <button class="btn primary" id="next7">Generate review ‚ñ∂</button>
        </div>
      </div>

      <!-- STEP 8: REVIEW PREVIEW -->
      <div class="step" id="step8">
        <div class="step-header">
          <div class="step-number">8</div>
          <div>
            <h2>Your review is ready!</h2>
            <p class="step-description">You can edit anything below. Then copy & post directly to Google Reviews.</p>
          </div>
        </div>
        <div class="question-container">
          <textarea id="review" placeholder="Your review will appear here."></textarea>
        </div>
        <div class="step-actions">
          <button class="btn ghost" id="back8">‚óÄ Back to edit</button>
          <button class="btn ghost" id="shuffleBtn">üîÑ Shuffle wording</button>
          <button class="btn primary" id="postBtn">üìù Copy & open Google Reviews</button>
        </div>
        <div id="okBanner" class="banner ok"></div>
        <div id="errBanner" class="banner error"></div>
        <div style="margin-top:8px;">
          <span class="pill">How to post</span>
          <ol class="steps">
            <li>Click <strong>Copy & open Google Reviews</strong>.</li>
            <li>In the new tab, click <strong>"Write a review"</strong>.</li>
            <li><strong>Paste</strong> your text (Ctrl+V / Cmd+V).</li>
            <li>Select your stars (we‚Äôre assuming ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê here!) and click <strong>Post</strong>.</li>
          </ol>
        </div>
      </div>
    </section>
  </div>

  <script>
    // === CONFIG ===
    const PLACE_IDS = {
      "Cooper City": "ChIJq40vQ-mn2YgRDZqITQuzg54",
      "Weston": "ChIJq4rEv1UJ2YgRnaM9dhzhK7g",
      "Aventura": "ChIJmT2oOVyt2YgRwWlbgMsPFZk"
    };

    const OPENERS = [
      "We‚Äôve had an amazing experience at Code Ninjas {{location}}.",
      "Our child absolutely loves Code Ninjas {{location}}.",
      "Code Ninjas {{location}} has been an incredible find for our family.",
      "We‚Äôre so impressed with Code Ninjas {{location}}.",
      "Choosing Code Ninjas {{location}} was one of the best decisions we‚Äôve made."
    ];

    const CLOSERS_5 = [
      "We highly recommend Code Ninjas {{location}} to any family looking for a fun, engaging, and impactful learning experience.",
      "If you‚Äôre considering Code Ninjas {{location}}, go for it ‚Äî your child will thank you.",
      "We‚Äôre grateful for everything the team at Code Ninjas {{location}} has done for our Ninja.",
      "Five stars for Code Ninjas {{location}} ‚Äî we couldn‚Äôt be happier.",
      "Code Ninjas {{location}} has absolutely earned our 5‚òÖ review."
    ];

    const SHOUTOUT_WITH_NAME = {
      sensei: [
        "A special shout-out to {{name}} for making every session engaging and supportive.",
        "{{name}} has a real gift for connecting with kids and making coding fun.",
        "{{name}} consistently went above and beyond to help our child grow.",
        "Our Ninja talks about {{name}} all the time ‚Äî their impact has been incredible."
      ],
      director: [
        "We really appreciate {{name}} for running such a welcoming, organized center.",
        "{{name}} has built a culture that puts kids first, and it shows.",
        "{{name}} is always present, supportive, and committed to making the dojo great."
      ],
      generic: [
        "We truly appreciate {{name}} for their positivity, support, and impact on our Ninja.",
        "{{name}} helped make Code Ninjas feel like a second home."
      ]
    };

    const SHOUTOUT_GENERIC = {
      sensei: [
        "The Senseis are fantastic role models and mentors.",
        "The instructors make coding feel exciting and approachable.",
        "Senseis are patient, upbeat, and genuinely invested in each Ninja."
      ],
      director: [
        "The center leadership is organized, responsive, and clearly passionate.",
        "You can tell the Director truly cares about creating a great experience for every family."
      ],
      team: [
        "Huge thanks to the entire team for being so friendly, patient, and invested in the kids.",
        "The whole Code Ninjas {{location}} crew deserves recognition for their energy and support.",
        "Everyone at the dojo works together to create a fun, safe space for learning."
      ],
      generic: [
        "The staff consistently go the extra mile for their Ninjas.",
        "The team creates a welcoming environment where kids feel confident trying new things."
      ]
    };

    // On-brand, varied sentence pools for each selected tag.
    const TAG_VARIATIONS = {
      // Facility
      clean: [
        "The dojo is always clean, bright, and well-maintained.",
        "Every visit, the center feels fresh, tidy, and ready for Ninjas to learn.",
        "We appreciate how spotless and cared-for the space always is."
      ],
      organized: [
        "Check-in, scheduling, and the flow of the dojo are smooth and organized.",
        "The layout and process are thoughtful and efficient, which keeps things stress-free.",
        "Everything runs like a well-organized dojo, from arrival to pickup."
      ],
      safe: [
        "We feel completely confident in the safety, supervision, and secure check-in process.",
        "Safety is clearly a priority here, which gives us real peace of mind.",
        "Our Ninja is always in good hands ‚Äî the staff is attentive and on top of everything."
      ],
      "fun-vibe": [
        "The fun, colorful, ninja-themed environment keeps kids excited to be there.",
        "The dojo has an energetic, playful vibe that makes learning feel like an adventure.",
        "It‚Äôs such a fun space that our child never wants to leave after a session."
      ],
      tech: [
        "The center is equipped with modern tech that keeps our Ninja inspired and engaged.",
        "The computers, tools, and gear are up to date, which really enhances the experience.",
        "We love that the setup feels current, professional, and built for young coders."
      ],
      comfort: [
        "The space is comfortable and welcoming for both Ninjas and parents.",
        "There‚Äôs a relaxed, friendly atmosphere that makes it easy to hang out before and after class.",
        "It‚Äôs a place our family genuinely enjoys spending time in."
      ],

      // Staff & communication
      friendly: [
        "Everyone on the team is warm, welcoming, and genuinely kind to the kids.",
        "From the moment you walk in, the staff creates a friendly, inviting atmosphere.",
        "They remember names, greet families with a smile, and make kids feel like part of the dojo."
      ],
      knowledgeable: [
        "The Senseis really know their stuff and explain concepts clearly.",
        "Instructors are skilled, patient, and great at breaking down complex ideas.",
        "We‚Äôre impressed by how confidently and clearly the team teaches real coding."
      ],
      "engaging-staff": [
        "They keep our child engaged, challenged, and eager to come back.",
        "Senseis balance fun with focus, so kids stay locked in on their projects.",
        "They know how to motivate different personalities and learning styles."
      ],
      communication: [
        "Communication with families is clear, friendly, and consistent.",
        "We‚Äôre always kept in the loop about progress, schedules, and events.",
        "Any questions we‚Äôve had have been answered quickly and professionally."
      ],

      // Instruction & learning
      "engaging-lessons": [
        "Lessons are hands-on, creative, and never feel boring.",
        "Our child loves that learning happens through real projects, not just lectures.",
        "They‚Äôve turned coding into something our Ninja genuinely looks forward to."
      ],
      "clear-structure": [
        "The belt system and curriculum make it easy to see exactly how our Ninja is progressing.",
        "There‚Äôs a clear, thoughtful learning path instead of random activities.",
        "Goals are structured in a way that keeps kids motivated to level up."
      ],
      "real-progress": [
        "We‚Äôve seen real growth in our child‚Äôs skills since starting.",
        "Our Ninja is building projects independently now, which says a lot.",
        "It‚Äôs clear that this isn‚Äôt just screen time ‚Äî they‚Äôre truly learning."
      ],
      confidence: [
        "Our child‚Äôs confidence and independence have noticeably grown.",
        "They tackle challenges with more patience and problem-solving grit.",
        "We‚Äôve seen a big boost in how confidently they approach new technology."
      ],

      // Child experience
      "looks-forward": [
        "Our child genuinely looks forward to every session at Code Ninjas.",
        "There are zero complaints about going ‚Äî just excitement.",
        "It‚Äôs become the highlight of their week."
      ],
      "more-confident": [
        "They‚Äôre more confident exploring technology on their own.",
        "They‚Äôre proud to show off what they‚Äôve built and how they built it.",
        "We‚Äôve watched them shift from intimidated by code to curious and brave."
      ],
      "new-friends": [
        "They‚Äôve made new friends who share their love of games and tech.",
        "The dojo community has helped them feel connected and included.",
        "It‚Äôs a social space as much as a learning one, which our child loves."
      ],
      "creative-thinking": [
        "We‚Äôve seen their creativity and curiosity with technology really grow.",
        "They‚Äôre constantly brainstorming new ideas to build and test.",
        "Code Ninjas has helped unlock a more creative, inventive side of them."
      ],

      // Program-specific (expanded)
      jr: [
        "The JR program has been the perfect playful introduction to coding for our younger Ninja.",
        "JR makes early coding fun, visual, and age-appropriate, which keeps our little one engaged.",
        "We love how JR turns basic concepts into simple, hands-on activities our child understands."
      ],
      create: [
        "The CREATE program offers a great balance of structure, creativity, and real coding skills.",
        "CREATE has helped our child move from just playing games to actually building them.",
        "The belt system in CREATE keeps our Ninja motivated and proud of each milestone."
      ],
      robotics: [
        "The robotics program has been a huge hit and brings coding to life in a hands-on way.",
        "Building and programming robots has boosted our child‚Äôs problem-solving and teamwork.",
        "Robotics sessions are always a highlight ‚Äî challenging, fun, and very engaging."
      ],
      ai: [
        "We‚Äôre excited that our child is exploring AI in a safe, age-appropriate way.",
        "The AI projects feel modern and relevant, and our Ninja loves learning cutting-edge tech.",
        "AI sessions at Code Ninjas make advanced concepts approachable and exciting."
      ],
      clubs: [
        "The themed clubs (like Minecraft, Roblox, or YouTube) tap into what kids love while building real skills.",
        "Clubs give our child a fun, low-pressure way to explore tech interests with friends.",
        "We love that clubs blend creativity, community, and technology in a fun weekly format."
      ],
      party: [
        "Our birthday party at Code Ninjas was organized, unique, and stress-free for parents.",
        "The team handled activities, setup, and clean-up ‚Äî the kids had an absolute blast.",
        "If you‚Äôre considering a tech-themed party, Code Ninjas is an awesome, memorable choice."
      ],
      camp: [
        "Camps at Code Ninjas are packed with fun projects that keep kids learning all week.",
        "Our child came home from camp excited to show off new skills and creations.",
        "It‚Äôs one of the few camps where our Ninja was genuinely excited to go back every day."
      ]
    };

    // === Helpers ===
    function sample(arr){
      return arr[Math.floor(Math.random() * arr.length)];
    }

    function shuffleArray(arr){
      for(let i = arr.length - 1; i > 0; i--){
        const j = Math.floor(Math.random() * (i + 1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
      }
      return arr;
    }

    function uniquePush(arr, text){
      const t = (text || "").trim();
      if(!t) return;
      if(!arr.includes(t)) arr.push(t);
    }

    function joinSentences(lines){
      const cleaned = (lines || [])
        .map(l => (l || "").trim())
        .filter(Boolean)
        .map(l => {
          l = l.replace(/\s+/g, " ");
          return /[.!?]$/.test(l) ? l : l + ".";
        });
      return cleaned.join(" ");
    }

    function shuffleContainerChildren(selector){
      const parent = document.querySelector(selector);
      if(!parent) return;
      const children = Array.from(parent.children);
      if(children.length <= 1) return;
      for(let i = children.length - 1; i > 0; i--){
        const j = Math.floor(Math.random() * (i + 1));
        [children[i], children[j]] = [children[j], children[i]];
      }
      children.forEach(child => parent.appendChild(child));
    }

    async function copyToClipboard(text){
      try{
        await navigator.clipboard.writeText(text);
        return true;
      }catch(e){
        const ta = document.createElement("textarea");
        ta.value = text;
        document.body.appendChild(ta);
        ta.select();
        ta.setSelectionRange(0, ta.value.length);
        const ok = document.execCommand("copy");
        document.body.removeChild(ta);
        return ok;
      }
    }

    function buildReviewUrl(location){
      const pid = PLACE_IDS[location];
      if(!pid) return "";
      return "https://search.google.com/local/writereview?placeid=" + encodeURIComponent(pid);
    }

    function showOk(msg){
      const el = document.getElementById("okBanner");
      el.textContent = msg || "Copied! In the new tab, click ‚ÄúWrite a review‚Äù, paste, add your stars, and post. üéâ";
      el.style.display = "block";
      setTimeout(()=>{ el.style.display = "none"; }, 4000);
    }

    function showErr(msg){
      const el = document.getElementById("errBanner");
      el.textContent = msg || "Something went wrong. Please try again.";
      el.style.display = "block";
      setTimeout(()=>{ el.style.display = "none"; }, 5000);
    }

    function buildReviewText(location){
      if(!location) return "";

      const opener = sample(OPENERS).replaceAll("{{location}}", location);
      const middle = [];

      // Gather all selected tags (checkboxes + radios with .tag)
      const selected = new Set();
      document.querySelectorAll(".tag").forEach(input => {
        if((input.type === "checkbox" || input.type === "radio") && input.checked){
          selected.add(input.value);
        }
      });

      // Ensure primary program sentence if selected
      const programVal = document.querySelector('input[name="program"]:checked')?.value;
      if(programVal && TAG_VARIATIONS[programVal]){
        uniquePush(middle, sample(TAG_VARIATIONS[programVal]));
      }

      // Add variety for all selected tags
      selected.forEach(tag => {
        if(TAG_VARIATIONS[tag]){
          uniquePush(middle, sample(TAG_VARIATIONS[tag]));
        }
      });

      // Shoutout logic
      const shoutoutChecked = document.getElementById("shoutoutCheck").checked;
      const shoutoutType = document.querySelector('input[name="shoutoutType"]:checked')?.value;
      const shoutoutName = (document.getElementById("shoutoutName")?.value || "").trim();

      if(shoutoutChecked && shoutoutType){
        if(shoutoutType === "team"){
          const pool = SHOUTOUT_GENERIC.team || SHOUTOUT_GENERIC.generic;
          uniquePush(middle, sample(pool).replaceAll("{{location}}", location));
        }else if(shoutoutName){
          const pool = SHOUTOUT_WITH_NAME[shoutoutType] || SHOUTOUT_WITH_NAME.generic;
          uniquePush(middle, sample(pool).replaceAll("{{name}}", shoutoutName));
        }else{
          const pool = SHOUTOUT_GENERIC[shoutoutType] || SHOUTOUT_GENERIC.generic;
          uniquePush(middle, sample(pool).replaceAll("{{location}}", location));
        }
      }

      shuffleArray(middle);

      const closer = sample(CLOSERS_5).replaceAll("{{location}}", location);
      const all = [opener, ...middle, closer];

      return joinSentences(all);
    }

    function updatePreview(){
      const location = document.getElementById("location").value;
      const ta = document.getElementById("review");
      if(!location){
        ta.value = "";
        return;
      }
      ta.value = buildReviewText(location);
    }

    async function postOnGoogle(){
      const location = document.getElementById("location").value;
      const text = (document.getElementById("review").value || "").trim();

      if(!location){
        showErr("Please select your location first.");
        return;
      }
      if(!text){
        showErr("Use the steps above to build your review first.");
        return;
      }

      const url = buildReviewUrl(location);
      if(!url){
        showErr("Review link for this location is not configured yet.");
        return;
      }

      const ok = await copyToClipboard(text);
      if(!ok){
        showErr("Couldn‚Äôt copy automatically. Please copy the text manually before posting.");
        return;
      }

      window.open(url, "_blank", "noopener");
      showOk();
    }

    // === Wizard nav helpers ===
    let currentStep = 1;
    const totalSteps = 8;

    function updateProgressUI(){
      const pct = (currentStep / totalSteps) * 100;
      document.getElementById("progressFill").style.width = pct + "%";
      document.getElementById("progressText").textContent = "Step " + currentStep + " of " + totalSteps;
    }

    function showStep(step){
      document.querySelectorAll(".step").forEach(s => {
        s.classList.remove("active");
        s.style.display = "none";
      });
      const el = document.getElementById("step" + step);
      if(el){
        el.style.display = "block";
        requestAnimationFrame(() => el.classList.add("active"));
      }
      currentStep = step;
      updateProgressUI();
    }

    function nextStep(){
      if(currentStep < totalSteps){
        const target = currentStep + 1;
        if(target === 8){
          updatePreview();
        }
        showStep(target);
      }
    }

    function prevStep(){
      if(currentStep > 1){
        showStep(currentStep - 1);
      }
    }

    function requireSelection(stepSelector, nextId){
      const stepEl = document.querySelector(stepSelector);
      const nextBtn = document.getElementById(nextId);
      if(!stepEl || !nextBtn) return;

      function check(){
        const anyChecked = stepEl.querySelector('input[type="checkbox"]:checked, input[type="radio"]:checked');
        nextBtn.disabled = !anyChecked;
      }

      check();
      stepEl.addEventListener("change", check);
    }

    // === Init ===
    (function init(){
      // Shuffle option order across steps to reduce repetitive patterns
      shuffleContainerChildren("#step2 .options-grid");
      shuffleContainerChildren("#step3 .options-grid");
      shuffleContainerChildren("#step4 .options-grid");
      shuffleContainerChildren("#step5 .options-grid");
      shuffleContainerChildren("#step6 .options-grid");
      shuffleContainerChildren("#step7 .shoutout-options");

      // Step 1: location
      const locSel = document.getElementById("location");
      const next1 = document.getElementById("next1");
      locSel.addEventListener("change", () => {
        next1.disabled = !locSel.value;
      });
      next1.addEventListener("click", () => {
        if(locSel.value) nextStep();
      });

      // Require at least one choice for key steps
      requireSelection("#step2", "next2");
      requireSelection("#step3", "next3");
      requireSelection("#step4", "next4");
      requireSelection("#step5", "next5");
      requireSelection("#step6", "next6");

      // Next buttons
      document.getElementById("next2").addEventListener("click", nextStep);
      document.getElementById("next3").addEventListener("click", nextStep);
      document.getElementById("next4").addEventListener("click", nextStep);
      document.getElementById("next5").addEventListener("click", nextStep);
      document.getElementById("next6").addEventListener("click", nextStep);
      document.getElementById("next7").addEventListener("click", () => { updatePreview(); nextStep(); });

      // Back buttons
      document.getElementById("back2").addEventListener("click", prevStep);
      document.getElementById("back3").addEventListener("click", prevStep);
      document.getElementById("back4").addEventListener("click", prevStep);
      document.getElementById("back5").addEventListener("click", prevStep);
      document.getElementById("back6").addEventListener("click", prevStep);
      document.getElementById("back7").addEventListener("click", prevStep);
      document.getElementById("back8").addEventListener("click", prevStep);

      // Shoutout behavior
      const shoutoutCheck = document.getElementById("shoutoutCheck");
      const shoutoutDetails = document.getElementById("shoutoutDetails");
      const shoutoutNameSection = document.getElementById("shoutoutNameSection");
      const shoutoutNameInput = document.getElementById("shoutoutName");

      shoutoutCheck.addEventListener("change", () => {
        const on = shoutoutCheck.checked;
        shoutoutDetails.style.display = on ? "block" : "none";
        if(!on){
          document.querySelectorAll('input[name="shoutoutType"]').forEach(i => i.checked = false);
          shoutoutNameInput.value = "";
          shoutoutNameSection.style.display = "none";
        }
      });

      document.querySelectorAll('input[name="shoutoutType"]').forEach(i => {
        i.addEventListener("change", () => {
          if(i.checked){
            if(i.value === "team"){
              shoutoutNameSection.style.display = "none";
              shoutoutNameInput.value = "";
            }else{
              shoutoutNameSection.style.display = "block";
            }
          }
        });
      });

      // Shuffle wording + post
      document.getElementById("shuffleBtn").addEventListener("click", updatePreview);
      document.getElementById("postBtn").addEventListener("click", postOnGoogle);

      // Visual selection states
      function updateSelectionVisuals(){
        document.querySelectorAll(".option-card").forEach(card => {
          const input = card.querySelector("input");
          card.classList.toggle("selected", !!(input && input.checked));
        });
        document.querySelectorAll(".shoutout-option").forEach(card => {
          const input = card.querySelector("input");
          card.classList.toggle("selected", !!(input && input.checked));
        });
      }
      document.addEventListener("change", e => {
        if(e.target.matches("input")){
          updateSelectionVisuals();
        }
      });
      document.addEventListener("click", e => {
        if(e.target.closest(".option-card") || e.target.closest(".shoutout-option")){
          updateSelectionVisuals();
        }
      });

      showStep(1);
    })();
  </script>

  <script type="text/javascript" src="/unprotected/back_to_spaceship.js"></script>

<script type="text/javascript" src="/unprotected/back_to_spaceship.js?hash=4975d460e508829e8fb64d3962bc44ad35f3a95a"></script>

</body>
</html>
